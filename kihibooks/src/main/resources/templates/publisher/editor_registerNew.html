<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
        layout:decorate="~{layout/layout.html}">
<head>
    <meta charset="UTF-8">
    <title>KiHiBooks - ìƒˆ ì‘í’ˆ ë“±ë¡</title>
    <style>
        /* ê¸°ë³¸ì ì¸ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            font-family: 'Arial', sans-serif;
        }

        /* í˜ì´ì§€ ì œëª© ìŠ¤íƒ€ì¼ */
        .register-work-page h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 2px solid #ff7f50;
            padding-bottom: 10px;
            font-weight: bold;
        }
        /* ë“±ë¡ í¼ ìŠ¤íƒ€ì¼ */
        .register-work-form {
            background-color: #f8f9fa;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        /* í¼ ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
        .form-group {
            margin-bottom: 20px;
        }
        /* ë¼ë²¨ ìŠ¤íƒ€ì¼ */
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }
        /* ëŒ€ë¶„ë¥˜ì™€ ì†Œë¶„ë¥˜ë¥¼ ê°€ë¡œ ì •ë ¬ */
        .category-row {
            display: flex;
            gap: 20px; /* ìš”ì†Œ ì‚¬ì´ ì—¬ë°± */
            justify-content: space-between;
            flex-wrap: wrap;
        }
        /* ê° ì…€ë ‰íŠ¸ ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
        .category-group {
            flex: 1;
            min-width: 200px;
        }
        /* ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
        .form-group input[type="text"],
        .form-group input[type="file"],
        .form-group input[type="date"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        /* ë²„íŠ¼ ê·¸ë£¹ ìŠ¤íƒ€ì¼ */
        .button-group {
            margin-top: 30px;
            text-align: center;
        }
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .button-group button {
            padding: 10px 20px;
            font-size: 1rem;
            border: none;
            border-radius: .25rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            margin: 0 5px;
        }
        .button-group .btn-primary {
            background-color: #ff7f50;
            color: white;
        }
        .button-group .btn-primary:hover {
            background-color: #ff6347;
        }
        .button-group .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        .button-group .btn-secondary:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>
    <main layout:fragment="content">
        <div class="container register-work-page">
            <h2>ğŸ“– ìƒˆ ì‘í’ˆ ë“±ë¡</h2>
            <p>ìƒˆë¡œìš´ ì‘í’ˆ(ë„ì„œ ì‹œë¦¬ì¦ˆ) ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  ë“±ë¡í•˜ì„¸ìš”.</p>

            <!-- ìƒˆ ì‘í’ˆ ë“±ë¡ í¼ -->
            <form action="/editor/registerNew" method="post" class="register-work-form" enctype="multipart/form-data">
                <!-- ë‹´ë‹¹ ì—ë””í„° ë²ˆí˜¸ -->
                <input type="hidden" name="bo_pi_num" th:value="${user.pi_num}">
                <!-- ì‘í’ˆ ì œëª© -->
                <div class="form-group">
                    <label for="boTitle">ì‘í’ˆ ì œëª© <span style="color: red;">*</span></label>
                    <input type="text" id="bo_title" name="bo_title" class="form-control" required> 
                </div>

                <!-- ì €ìëª… -->
                <div class="form-group">
                    <label for="boAuthor">ì €ìëª… <span style="color: red;">*</span></label>
                    <input type="text" id="bo_author" name="bo_author" class="form-control" required>
                </div>

                <!-- ì¥ë¥´ ì„ íƒ (ëŒ€ë¶„ë¥˜ ë° ì†Œë¶„ë¥˜) -->
                <div class="form-group category-row">
                    <div class="category-group">
                        <label for="mainCategory">ëŒ€ë¶„ë¥˜ <span style="color: red;">*</span></label>
                        <select id="mainCategory" name="mainCategory" class="form-control" required>
                            <option value="">-- ëŒ€ë¶„ë¥˜ ì„ íƒ --</option>
                            <option value="1">ë¡œë§¨ìŠ¤</option>
                            <option value="2">ë¡œíŒ</option>
                            <option value="3">íŒíƒ€ì§€</option>
                            <option value="4">ë¬´í˜‘</option>
                        </select>
                    </div>

                    <div class="category-group">
                        <label for="subCategory">ì†Œë¶„ë¥˜ <span style="color: red;">*</span></label>
                        <select id="subCategory" name="bo_sc_code" class="form-control" required>
                            <option value="">-- ì†Œë¶„ë¥˜ ì„ íƒ --</option>
                            <!-- ì†Œë¶„ë¥˜ëŠ” JavaScriptë¡œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤. -->
                        </select>
                    </div>
                </div>
                

                <!-- ì‘í’ˆ ì†Œê°œ -->
                <div class="form-group">
                    <label for="bo_description">ì‘í’ˆ ì†Œê°œ</label>
                    <textarea id="bo_description" name="bo_description" class="form-control" rows="6"></textarea>
                </div>

                <!-- ì—°ì¬ ì£¼ê¸° ì„ íƒ -->
                <div class="form-group">
                    <label for="bo_serial_schedule">ì—°ì¬ ì£¼ê¸°</label>
                    <select id="bo_serial_schedule" name="bo_serial_schedule" class="form-control">
                        <option value="">-- ì„ íƒ ì•ˆí•¨ --</option>
                        <option value="ì›”ìš”ì—°ì¬">ì›”ìš”ì—°ì¬</option>
                        <option value="í™”ìš”ì—°ì¬">í™”ìš”ì—°ì¬</option>
                        <option value="ìˆ˜ìš”ì—°ì¬">ìˆ˜ìš”ì—°ì¬</option>
                        <option value="ëª©ìš”ì—°ì¬">ëª©ìš”ì—°ì¬</option>
                        <option value="ê¸ˆìš”ì—°ì¬">ê¸ˆìš”ì—°ì¬</option>
                        <option value="í† ìš”ì—°ì¬">í† ìš”ì—°ì¬</option>
                        <option value="ì¼ìš”ì—°ì¬">ì¼ìš”ì—°ì¬</option>
                        <option value="ì£¼3íšŒ">ì£¼ 3íšŒ</option>
                    </select>
                </div>

                <!-- ì—°ì¬ ì‹œì‘ì¼ -->
                <div class="form-group">
                    <label for="boStartDate">ì—°ì¬ ì‹œì‘ì¼</label>
                    <input type="date" id="bo_publish_date" name="bo_publish_date" class="form-control">
                </div>

                <!-- ì„±ì¸ì—´ëŒê°€ëŠ¥ ì—¬ë¶€ -->
                <div class="form-group">
                    <label>ì„±ì¸ì—´ëŒ ê°€ëŠ¥ ì—¬ë¶€ <span style="color: red;">*</span></label>
                    <div>
                        <!-- name ì†ì„±ì€ ë™ì¼í•˜ê²Œ, value ì†ì„±ìœ¼ë¡œ êµ¬ë¶„ -->
                        <div class="form-check form-check-inline"> <!-- Bootstrap ì¸ë¼ì¸ ì²´í¬ë°•ìŠ¤/ë¼ë””ì˜¤ ìŠ¤íƒ€ì¼ -->
                        <input class="form-check-input" type="radio" name="bo_adult" id="adultYes" value="Y" required>
                        <label class="form-check-label" for="adultYes">ì˜ˆ</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="bo_adult" id="adultNo" value="N" required checked> <!-- ê¸°ë³¸ê°’ 'ì•„ë‹ˆì˜¤' ì„ íƒ -->
                        <label class="form-check-label" for="adultNo">ì•„ë‹ˆì˜¤</label>
                        </div>
                    </div>
                </div>

                <!-- ê¸°ë‹¤ë¬´(ê¸°ë‹¤ë¦¬ë©´ ë¬´ë£Œ) ì—¬ë¶€ -->
                <div class="form-group">
                    <label>ê¸°ë‹¤ë¬´(ê¸°ë‹¤ë¦¬ë©´ ë¬´ë£Œ) ì ìš© ì—¬ë¶€ <span style="color: red;">*</span></label>
                    <div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="bo_wait_free" id="waitFreeYes" value="Y" required>
                        <label class="form-check-label" for="waitFreeYes">ì˜ˆ</label>
                        </div>
                        <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="bo_wait_free" id="waitFreeNo" value="N" required checked> <!-- ê¸°ë³¸ê°’ 'ì•„ë‹ˆì˜¤' ì„ íƒ -->
                        <label class="form-check-label" for="waitFreeNo">ì•„ë‹ˆì˜¤</label>
                        </div>
                    </div>
                </div>

                <!-- ê¸°ë‹¤ë¬´ ê¸°ê°„ (ê¸°ë‹¤ë¬´ ì—¬ë¶€ê°€ 'ì˜ˆ'ì¼ ë•Œë§Œ ë³´ì´ë„ë¡ JavaScript ì²˜ë¦¬ í•„ìš”) -->
                <!-- ì´ ì„¹ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê²¨ì ¸ ìˆë‹¤ê°€, 'ê¸°ë‹¤ë¬´ ì—¬ë¶€' ë¼ë””ì˜¤ ë²„íŠ¼ ì„ íƒì— ë”°ë¼ JavaScriptë¡œ ë³´ì´ê¸°/ìˆ¨ê¸°ê¸° ì²˜ë¦¬í•©ë‹ˆë‹¤. -->
                <div class="form-group" id="waitFreeDurationGroup" style="display: none;"> <!-- ì´ˆê¸° ìˆ¨ê¹€ -->
                    <label for="bo_wait_free_duration">ê¸°ë‹¤ë¬´ ê¸°ê°„ (ì‹œê°„ ë‹¨ìœ„) <span style="color: red;">*</span></label>
                    <!-- ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥í•˜ë„ë¡ type="number" ì‚¬ìš© -->
                    <!-- min, max, step ì†ì„± ë“±ìœ¼ë¡œ ì…ë ¥ ê°’ ì œí•œ ê°€ëŠ¥ -->
                    <input type="number" id="bo_wait_free_duration" name="bo_wait_free_duration" class="form-control" min="1" value="24"> <!-- ê¸°ë³¸ê°’ 24ì‹œê°„ -->
                    <small class="form-text text-muted">ì˜ˆ: 24 (24ì‹œê°„ë§ˆë‹¤ ë¬´ë£Œ)</small>
                </div>

                <!-- ë¬´ë£Œ íšŒì°¨ ìˆ˜ -->
                <div class="form-group">
                    <label for="bo_free_episode_count">ë¬´ë£Œ íšŒì°¨ ìˆ˜ <span style="color: red;">*</span></label>
                    <!-- ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥í•˜ë„ë¡ type="number" ì‚¬ìš© -->
                    <input type="number" id="bo_free_episode_count" name="bo_free_episode_count" class="form-control" required min="0" value="0"> <!-- ê¸°ë³¸ê°’ 0í™” -->
                    <small class="form-text text-muted">ì²˜ìŒë¶€í„° ë¬´ë£Œë¡œ ì œê³µë  íšŒì°¨ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</small>
                </div>

                <!-- í‚¤ì›Œë“œ -->
                <div class="form-group">
                    <label for="bo_keywords">í‚¤ì›Œë“œ</label>
                    <input type="text" id="bo_keywords" name="bo_keywords" class="form-control">
                    <small class="form-text text-muted">ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•˜ì—¬ ì—¬ëŸ¬ ê°œì˜ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”. (ì˜ˆ: #í˜„ëŒ€íŒíƒ€ì§€, #ë¨¼ì¹˜í‚¨, #ì„±ì¥í˜•ì£¼ì¸ê³µ)</small>
                </div>

                <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">ë“±ë¡</button>
                    <button type="button" class="btn btn-secondary" onclick="history.back()">ì·¨ì†Œ</button>
                </div>
            </form>
            <script>
                $("#mainCategory").on("change", function(){
                    const mainCategoryValue = $(this).val();
                    $.ajax({
                        url: "/book/getSubCategory",
                        type: 'GET',
                        data: {mainCategoryValue},
                        success: function(response){
                            const $subCategorySelect = $('#subCategory');
                            $subCategorySelect.empty();
                            $subCategorySelect.append('<option value="">-- ì†Œë¶„ë¥˜ ì„ íƒ --</option>');

                            response.forEach(function(subCategory) {
                                $subCategorySelect.append(`
                                    <option value="${subCategory.sc_code}">${subCategory.sc_name}</option>
                                `);
                            });
                        }
                    })
                })
            </script>
        </div>
    </main>

    </body>
</html>
